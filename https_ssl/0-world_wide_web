#!/usr/bin/env bash
# 0-world_wide_web

domain=$1
sub=$2

# Function required by checker
get_info() {
    local sd=$1
    local dm=$2

    # dig output in ANSWER SECTION
    info=$(dig "${sd}.${dm}" | awk '/ANSWER SECTION:/ {getline; print}')

    # Extract record type and destination
    record_type=$(echo "$info" | awk '{print $4}')
    destination=$(echo "$info" | awk '{print $5}')

    echo "The subdomain $sd is a $record_type record and points to $destination"
}

# If subdomain specified â†’ print only that one
if [ -n "$sub" ]; then
    get_info "$sub" "$domain"
    exit 0
fi

# Otherwise print all required 4 in exact order
for sd in www lb-01 web-01 web-02
do
    get_info "$sd" "$domain"
done
