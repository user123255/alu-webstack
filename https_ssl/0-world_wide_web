#!/usr/bin/env bash
# Displays subdomain DNS information

domain=$1
subdomain=$2

# Function to get info for a single subdomain
get_info() {
    local sd=$1
    local info record_type destination

    info=$(dig ${sd}.${domain} | awk '/ANSWER SECTION:/ {getline; print}')
    record_type=$(echo "$info" | awk '{print $4}')
    destination=$(echo "$info" | awk '{print $5}')

    echo "The subdomain $sd is a $record_type record and points to $destination"
}

# If only domain is provided â†’ check default subdomains
if [ -z "$subdomain" ]; then
    for sd in www lb-01 web-01 web-02; do
        get_info "$sd"
    done
else
    # If both domain and subdomain are provided
    get_info "$subdomain"
fi
