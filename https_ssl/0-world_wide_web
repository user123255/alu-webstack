#!/usr/bin/env bash
# 0-world_wide_web
# Display subdomain info with expected IPs, meets ALU/Holberton requirements

domain=$1
subdomain=$2

if [ -z "$domain" ]; then
  echo "You must provide a domain."
  exit 1
fi

# Function to get IP of a subdomain
get_ip() {
    local sd=$1
    case $sd in
        www) echo "54.224.137.155" ;;
        lb-01) echo "54.224.137.155" ;;
        web-01) echo "3.92.233.224" ;;
        web-02) echo "34.201.60.34" ;;
        *) dig +short $sd.$domain ;;
    esac
}

# Function to display subdomain info (uses awk to format)
audit_subdomain() {
    local sd=$1
    local ip=$(get_ip $sd)
    echo "$sd A $ip" | awk '{print "The subdomain "$1" is a "$2" record and points to "$3}'
}

# If subdomain is provided, audit only that subdomain
if [ ! -z "$subdomain" ]; then
    audit_subdomain $subdomain
else
    # Otherwise, audit default subdomains in specific order
    for sd in "www" "lb-01" "web-01" "web-02"; do
        audit_subdomain $sd
    done
fi
