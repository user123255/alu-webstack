#!/usr/bin/env bash
# 0-world_wide_web
# Display subdomain information for nyayath.tech

domain=$1
subdomain=$2

# Function to get subdomain info
get_subdomain_info() {
    local sd=$1
    local d=$2
    # Use dig to get the ANSWER SECTION for the subdomain
    local info
    info=$(dig ${sd}.${d} | awk '/ANSWER SECTION:/ {getline; print}')
    # Extract record type and destination IP
    local record_type=$(echo "$info" | awk '{print $4}')
    local destination=$(echo "$info" | awk '{print $5}')
    echo "The subdomain ${sd} is a ${record_type} record and points to ${destination}"
}

if [ -z "$subdomain" ]; then
    # Default order: www, lb-01, web-01, web-02
    for sd in www lb-01 web-01 web-02; do
        get_subdomain_info $sd $domain
    done
else
    get_subdomain_info $subdomain $domain
fi
