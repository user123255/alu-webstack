#!/usr/bin/env bash
# This script checks the DNS records for subdomains and displays information about them

# Check if domain is provided
if [ -z "$1" ]; then
  echo "You must provide a domain."
  exit 1
fi

# Function to audit DNS record of a subdomain
audit_subdomain() {
  local subdomain=$1
  local domain=$2
  result=$(dig +short "$subdomain.$domain" | tail -n 1)

  if [ -n "$result" ]; then
    echo "$subdomain.$domain has IP: $result"
  fi
}

# If subdomain is provided, audit only that one
if [ -n "$2" ]; then
  audit_subdomain "$2" "$1"
else
  # Otherwise, audit default required subdomains
  for subdomain in www lb-01 web-01 web-02; do
    audit_subdomain "$subdomain" "$1"
  done
fi
